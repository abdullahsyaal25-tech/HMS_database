# WAMP Virtual Host Configuration for Hospital Management System (HMS)
# 
# Installation Instructions:
# 1. Copy this file to your WAMP Apache conf directory (e.g., D:\WAMP\bin\apache\apache2.4.54\conf\extra\)
#    or paste the content into httpd-vhosts.conf
# 2. Add the following line to your hosts file (C:\Windows\System32\drivers\etc\hosts):
#    127.0.0.1   hms.local
# 3. Restart WAMP Apache service
# 4. Access the application at: http://hms.local

<VirtualHost *:80>
    ServerName hms.local
    ServerAlias www.hms.local
    DocumentRoot "d:/HMS_DB/HMS_database/public"
    
    # Directory configuration
    <Directory "d:/HMS_DB/HMS_database/public">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Enable rewrite engine for Laravel
        RewriteEngine On
        
        # Handle Authorization header for Laravel Sanctum/Passport
        RewriteCond %{HTTP:Authorization} .
        RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
        
        # Redirect all requests to index.php if not a file or directory
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^ index.php [L]
    </Directory>
    
    # Logging configuration
    ErrorLog "logs/hms-error.log"
    CustomLog "logs/hms-access.log" combined
    
    # PHP configuration (adjust PHP version path as needed)
    <IfModule php_module>
        PHPINIDir "d:/HMS_DB/HMS_database"
    </IfModule>
    
    # For PHP-FPM or newer PHP versions
    <IfModule fcgid_module>
        FcgidInitialEnv PHPRC "d:/HMS_DB/HMS_database"
    </IfModule>
    
    # Set environment variables for Laravel
    SetEnv APP_ENV local
    SetEnv APP_DEBUG true
</VirtualHost>

# Optional: SSL Configuration (for HTTPS)
# <VirtualHost *:443>
#     ServerName hms.local
#     DocumentRoot "d:/HMS_DB/HMS_database/public"
#     
#     SSLEngine on
#     SSLCertificateFile "conf/ssl/hms.local.crt"
#     SSLCertificateKeyFile "conf/ssl/hms.local.key"
#     
#     <Directory "d:/HMS_DB/HMS_database/public">
#         Options Indexes FollowSymLinks
#         AllowOverride All
#         Require all granted
#     </Directory>
#     
#     ErrorLog "logs/hms-ssl-error.log"
#     CustomLog "logs/hms-ssl-access.log" combined
# </VirtualHost>
