<?php
require_once __DIR__.'/vendor/autoload.php';

use Illuminate\Support\Facades\DB;

$migrations = [
    '0001_01_01_000000_create_users_table',
    '2025_08_26_100418_add_two_factor_columns_to_users_table',
    '2026_01_01_211556_add_role_to_users_table',
    '2026_01_01_211629_create_patients_table',
    '2026_01_01_211650_create_doctors_table',
    '2026_01_01_211712_create_departments_table',
    '2026_01_01_211733_create_appointments_table',
    '2026_01_01_211757_create_medicines_table',
    '2026_01_01_211825_create_medicine_categories_table',
    '2026_01_01_211957_create_sales_table',
    '2026_01_01_212036_create_sales_items_table',
    '2026_01_01_212129_create_lab_tests_table',
    '2026_01_01_212201_create_lab_test_results_table',
    '2026_01_01_212348_create_medicine_alerts_table',
    '2026_01_01_212435_add_category_id_to_medicines_table',
    '2026_01_03_204030_add_status_to_medicine_alerts_table',
    '2026_01_03_234134_create_permissions_table',
    '2026_01_03_234140_create_role_permissions_table',
    '2026_01_05_214948_create_cache_table',
    '2026_01_05_220036_create_user_permissions_table',
    '2026_01_06_112035_create_personal_access_tokens_table',
    '2026_01_13_074509_create_audit_logs_table',
    '2026_01_15_000001_add_foreign_key_constraint_to_doctors_table',
    '2026_01_15_000002_add_indexes_for_performance',
    '2026_01_15_000003_add_metadata_columns',
    '2026_01_15_000004_add_appointment_partitioning',
    '2026_01_16_032321_add_performance_fields_to_audit_logs_table',
    '2026_01_16_051334_add_additional_performance_indexes',
    '2026_01_18_084257_create_permission_dependencies_table',
    '2026_01_18_084426_add_category_to_permissions_table',
    '2026_01_18_085717_create_temporary_permissions_table',
    '2026_01_18_085858_create_permission_change_requests_table',
    '2026_01_18_090023_create_permission_sessions_table',
    '2026_01_18_090207_create_permission_ip_restrictions_table',
    '2026_01_18_100000_create_permission_alerts_table',
    '2026_01_18_100100_create_permission_monitoring_logs_table',
    '2026_01_18_100200_create_permission_health_checks_table',
    '2026_01_24_000001_create_roles_table_and_normalize_permissions',
    '2026_01_24_000002_add_security_and_integrity_constraints',
    '2026_01_24_000003_create_medical_records_table',
    '2026_01_24_000004_remove_soft_deletes_from_audit_logs',
    '2026_01_27_081418_modify_doctors_table_structure',
    '2026_01_29_000000_create_department_services_table',
    '2026_01_29_000002_create_notifications_table',
    '2026_01_30_000001_create_lab_test_requests_table',
    '2026_02_02_091002_add_parent_role_id_to_roles_table',
    '2026_02_02_091014_create_role_reporting_relationships_table',
    '2026_02_02_091024_add_module_and_segregation_to_permissions_table',
    '2026_02_02_113241_remove_doctor_and_patient_roles',
    '2026_02_02_120001_rename_net_amount_to_grand_total_in_sales_table',
    '2026_02_02_120002_add_stock_columns_to_medicines_table',
    '2026_02_02_120004_add_medicine_id_to_medicines_table',
    '2026_02_02_120005_create_stock_movements_table',
    '2026_02_04_090000_add_missing_indexes',
    '2026_02_04_120000_add_performance_indexes',
    '2026_02_05_000001_add_rbac_missing_columns',
    '2026_02_05_000002_make_permission_columns_nullable',
    '2026_02_05_add_clinical_assessment_fields',
    '2026_02_06_000001_fix_rbac_role_id_assignments',
    '2026_02_10_000001_fix_sales_table_schema',
    '2026_02_10_000002_add_discount_to_sales_items',
    '2026_02_14_000001_create_prescriptions_tables',
    '2026_02_16_033034_add_fee_percentage_to_doctors_table',
    '2026_02_16_104500_create_appointment_services_table',
    '2026_02_16_120000_make_appointment_doctor_department_nullable',
    '2026_02_17_000001_add_daily_sequence_to_appointments_table',
    '2026_02_18_061931_add_doctor_percentage_to_department_services_table',
    '2026_02_18_064630_add_doctor_id_to_department_services_table',
    '2026_02_19_000001_add_stock_quantity_to_medicines_table',
    '2026_02_19_000001_create_suppliers_table',
    '2026_02_19_000002_create_purchases_table',
    '2026_02_19_000003_create_purchase_items_table',
    '2026_02_19_000010_add_cost_price_to_sales_items_table',
    '2026_02_19_000011_add_company_name_to_suppliers_table',
    '2026_02_19_101300_add_pharmacy_indexes',
    '2026_02_21_060438_add_company_to_purchases_and_sale_price_to_purchase_items',
    '2026_02_21_065009_add_department_id_to_lab_test_requests_table',
    '2026_02_21_103603_create_wallets_table',
    '2026_02_21_103612_create_transactions_table',
    '2026_02_21_110755_create_jobs_table',
    '2026_02_23_000001_add_discount_type_to_appointments_table',
];

foreach ($migrations as $migration) {
    try {
        DB::insert("INSERT IGNORE INTO migrations (migration, batch) VALUES (?, ?)", [$migration, 1]);
        echo "Added migration: $migration\n";
    } catch (Exception $e) {
        echo "Error adding migration $migration: " . $e->getMessage() . "\n";
    }
}

echo "All existing migrations marked as run.\n";